/* Extracted CSS from codepen-html.txt - contains all styles used by the page */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: #fff;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    overflow: hidden;
    position: relative;
}
        
/* 玻璃卡片效果 (簡化版 - 移除模糊) */
.glass-card {
    background: rgba(255, 255, 255, 0.15);
    border-radius: 20px;
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 
        0 8px 32px 0 rgba(31, 38, 135, 0.37),
        inset 0 1px 0 0 rgba(255, 255, 255, 0.3);
    animation: slideInFade 0.6s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes slideInFade {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

#info {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 100;
    padding: 24px;
    max-width: 400px;
    animation-delay: 0.1s;
}

#info h3 {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 18px;
    background: linear-gradient(135deg, #fff 0%, #f0f0f0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-shadow: 0 2px 10px rgba(0,0,0,0.1);
    letter-spacing: -0.5px;
}

#info > div {
    margin: 10px 0;
    padding: 12px 16px;
    background: rgba(255, 255, 255, 0.08);
    border-radius: 12px;
    font-size: 14px;
    line-height: 1.6;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

#info > div:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateX(4px);
    border-color: rgba(255, 255, 255, 0.2);
}
        
#controls {
    position: absolute;
    bottom: 20px;
    left: 20px;
    z-index: 100;
    padding: 12px; /* 縮小 padding */
    min-width: 220px; /* 縮小最小寬度 */
    animation-delay: 0.2s;
    box-sizing: border-box;
}

.button-group {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-bottom: 10px;
}
        
button {
    position: relative;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.28) 0%, rgba(255, 255, 255, 0.09) 100%);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.28);
    padding: 10px 16px; /* 縮小按鈕尺寸 */
    border-radius: 10px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.22s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.09);
    overflow: hidden;
    letter-spacing: 0.2px;
}

button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

button:hover::before {
    width: 300px;
    height: 300px;
}

button:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    border-color: rgba(255, 255, 255, 0.5);
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.2) 100%);
}

button:active {
    transform: translateY(0);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}
        
button:disabled {
    background: rgba(100, 100, 100, 0.3);
    cursor: not-allowed;
    opacity: 0.5;
    transform: none;
}

button:disabled:hover {
    transform: none;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

/* 初始強制隱藏 AR 啟動按鈕，僅由 JS 在初始化完成後顯示 */
#toggleAR { display: none !important; }

.control-hint {
    margin-top: 16px;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.15);
    font-size: 13px;
    line-height: 1.8;
    color: rgba(255, 255, 255, 0.85);
}

.control-hint-title {
    font-weight: 700;
    margin-bottom: 10px;
    font-size: 14px;
    color: rgba(255, 255, 255, 0.95);
}

.control-item {
    display: flex;
    align-items: center;
    gap: 8px;
    margin: 6px 0;
    padding: 6px 10px;
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    transition: background 0.2s;
}

.control-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

.control-key {
    font-weight: 700;
    color: #fff;
    min-width: 70px;
}
        
#legend {
    position: absolute;
    top: 20px;
    right: 20px; /* 靠右顯示（桌面） */
    left: auto;
    z-index: 100;
    padding: 12px; /* 減少 padding */
    min-width: 160px; /* 縮小最小寬度 */
    width: auto;
    animation-delay: 0.3s;
    text-align: left; /* 內容靠左 */
    font-size: 13px; /* 縮小整體字體 */
}
        
/* 手機 / 小螢幕樣式（更緊湊，不置中） */
@media (max-width: 480px) {
    /* 縮小文字與按鈕，讓畫面更節省空間 */
    body, #info, #legend, #controls { font-size: 13px; }

    /* Info：貼近左上，較窄，不置中 */
    #info {
        position: fixed;
        top: 8px;
        left: 8px;
        width: calc(48% - 12px);
        max-width: 220px;
        padding: 8px 10px;
        z-index: 1003;
        max-height: 42vh;
        overflow-y: auto;
    }

    /* Legend：貼近左上，較窄但顯示完整內容 */
    #legend {
        position: fixed;
        top: 8px;
        left: 8px;
        right: auto;
        width: auto;
        max-width: 260px; /* 放寬上限以容納所有文字 */
        padding: 8px; /* 減少 padding */
        z-index: 1002;
        max-height: none; /* 取消高度限制 */
        overflow: visible; /* 顯示全部內容 */
        text-align: left;
    }

    /* Controls：底部靠右，較小，避免蓋到畫面中間 */
    #controls {
        position: fixed;
        bottom: 8px;
        right: 8px;
        left: auto;
        width: calc(46% - 12px);
        max-width: 160px; /* 縮小上限 */
        padding: 6px; /* 更小的 padding */
        border-radius: 8px;
        z-index: 1004;
        display: block;
        box-sizing: border-box;
        text-align: right;
    }

    /* 按鈕縮小 */
    #controls .button-group button { padding: 6px 10px; font-size: 12px; }

    /* 讓整體頁面允許垂直滾動 */
    body { overflow-y: auto; }
}

/* 小螢幕下進一步縮小圖例文字 */
@media (max-width: 480px) {
    #legend h4 { font-size: 13px; }
    .legend-item span { font-size: 11px; }
}

/* AR 模式下微調樣式（當 body.in-ar 被加入時） */
body.in-ar #info,
body.in-ar #legend,
body.in-ar #controls {
    backdrop-filter: none;
    background: rgba(255,255,255,0.12);
    box-shadow: 0 8px 30px rgba(0,0,0,0.25);
}

/* 在 AR 模式下隱藏或簡化不必要的 UI，避免蓋住相機畫面 */
body.in-ar #debug { display: none !important; }
body.in-ar #resetView { display: none !important; }
body.in-ar .control-hint { display: none !important; }
body.in-ar #collapseInfo, body.in-ar #collapseLegend { display: none !important; }

/* 只保留主要 AR 啟動/網格切換按鈕，其他按鈕隱藏 */
body.in-ar #controls .button-group button { display: none !important; }
body.in-ar #controls .button-group button#toggleAR,
body.in-ar #controls .button-group button#toggleGrid { display: inline-block !important; }

/* 讓 info 在 AR 下變成頂部細長區塊，但內容改為直向排列，訊號強度顯示在經緯度下方 */
body.in-ar #info {
    position: fixed;
    top: 8px;
    left: 8px;
    right: 8px;
    z-index: 10005;
    padding: 8px 12px;
    max-width: none;
    border-radius: 10px;
    display: flex;
    flex-direction: column; /* 垂直堆疊：status -> location -> mode */
    align-items: stretch;
    background: rgba(0,0,0,0.35);
    backdrop-filter: none;
    font-size: 13px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    overflow: hidden;
    width: calc(100% - 16px) !important; /* 強制寬度為整個可視區域 */
    min-width: 0;
}

/* 隱藏標題與 debug，但保留 mode 並置於 location 下方 */
body.in-ar #info h3 { display: none !important; }
body.in-ar #info #debug { display: none !important; }

/* 將內部資訊區塊改為 block (垂直排列) 並精簡樣式 */
body.in-ar #info > div {
    display: block;
    margin: 6px 0;
    padding: 6px 8px;
    background: transparent;
    border: none;
    font-size: 13px;
    color: #fff;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* 強調 status / location 並保留可見度 */
body.in-ar #status { font-weight: 600; }
body.in-ar #location { opacity: 0.95; }

/* 確保 #mode 在 location 下方可見，顯示較小字體 */
body.in-ar #info #mode {
    display: block !important;
    margin-top: 2px;
    font-size: 10px;
    opacity: 0.95;
    text-align: left;
}

/* 簡化的圖例移到左下角，顯示全部資訊（不捲動） */
body.in-ar #legend {
    position: fixed;
    bottom: 20px;
    left: 12px;
    right: auto;
    z-index: 10004;
    padding: 8px;
    width: auto; /* 自動寬度以顯示完整內容 */
    max-width: 320px; /* 可視需要放寬最大寬度 */
    border-radius: 10px;
    background: rgba(0,0,0,0.30);
    font-size: 11px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    max-height: none; /* 取消高度限制 */
    overflow: visible; /* 顯示全部內容，不使用捲動 */
}

/* AR 模式下縮小圖例內標題與文字，並靠左 */
body.in-ar #legend h4 { font-size: 11px; margin-bottom: 10px; }
body.in-ar .legend-item span { font-size: 11px; }

/* 確保 AR 模式下按鈕組靠右 */
body.in-ar .button-group { justify-content: flex-end; }

/* Controls 移動到底部右側，並減少大小 */
body.in-ar #controls {
    position: fixed;
    bottom: 12px;
    right: 12px;
    left: auto;
    width: auto;
    padding: 8px;
    z-index: 10006;
}

/* 在小螢幕上進一步簡化 */
@media (max-width: 480px) {
    body.in-ar #info { font-size: 12px; padding: 6px 10px; }
    body.in-ar #legend { width: 140px; left: 8px; bottom: 8px; font-size: 11px; }
    body.in-ar #controls { min-width: 100px; padding: 6px; }
}

#legend h4 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 16px;
    color: rgba(255, 255, 255, 0.95);
    letter-spacing: -0.3px;
}
        
.legend-item {
    display: flex;
    align-items: center;
    margin: 10px 0; /* 稍微增加間距 */
    padding: 10px 10px; /* 增加 padding 讓格子更高 */
    min-height: 48px; /* 提供最小高度以拉高格子 */
    background: rgba(255, 255, 255, 0.06);
    border-radius: 8px;
    transition: all 0.22s cubic-bezier(0.4, 0, 0.2, 1);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

.legend-item:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateX(-4px);
    border-color: rgba(255, 255, 255, 0.2);
}
        
.legend-color {
    width: 28px; /* 放大色塊以和格子高度匹配 */
    height: 28px;
    margin-right: 12px;
    border-radius: 8px;
    box-shadow: 
        0 4px 10px rgba(0, 0, 0, 0.18),
        inset 0 1px 0 rgba(255, 255, 255, 0.25);
    flex-shrink: 0;
}

.legend-item span {
    font-size: 14px;
    font-weight: 500;
    color: rgba(255, 255, 255, 0.9);
}

/* 在 AR 模式下將圖例格子略為放大以便點擊 */
body.in-ar .legend-item { padding: 12px 12px; min-height: 54px; }
body.in-ar .legend-color { width: 32px; height: 32px; margin-right: 12px; }
        
#loading {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 200;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(20px);
    padding: 50px 60px;
    border-radius: 24px;
    text-align: center;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
}

#loading > div:first-of-type {
    font-size: 20px;
    font-weight: 600;
    margin-top: 12px;
    letter-spacing: 0.5px;
}
        
.spinner {
    border: 5px solid rgba(255, 255, 255, 0.1);
    border-top: 5px solid #fff;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    animation: spin 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) infinite;
    margin: 0 auto 20px;
}
        
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.status-ok { 
    color: #10b981;
    text-shadow: 0 0 12px rgba(16, 185, 129, 0.6);
    font-weight: 600;
}
.status-warning { 
    color: #f59e0b;
    text-shadow: 0 0 12px rgba(245, 158, 11, 0.6);
    font-weight: 600;
}
.status-error { 
    color: #ef4444;
    text-shadow: 0 0 12px rgba(239, 68, 68, 0.6);
    font-weight: 600;
}

/* 脈動效果 */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

#debug {
    font-family: 'Courier New', Consolas, monospace;
    font-size: 12px;
    animation: pulse 2s ease-in-out infinite;
}

/* 響應式設計 */
@media (max-width: 768px) {
    #info, #legend, #controls {
        max-width: calc(100vw - 40px);
        font-size: 13px;
        padding: 18px;
    }

    #info h3 {
        font-size: 20px;
    }

    button {
        padding: 12px 18px;
        font-size: 14px;
    }

    #legend {
        top: auto;
        bottom: 180px;
        right: 20px;
        max-width: 220px;
    }

    .legend-item {
        padding: 8px 10px;
    }

    .legend-color {
        width: 24px;
        height: 24px;
    }
}

/* 卷軸樣式 */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}
/* 在手機上，使用者尚未按下「開始 AR」前，只顯示啟動按鈕以降低干擾 */
@media (max-width: 480px) {
    body.mobile-await-ar #info,
    body.mobile-await-ar #legend {
        display: none !important;
    }

    /* 隱藏 controls 中其他按鈕，只保留 #toggleAR */
    body.mobile-await-ar #controls .button-group button { display: none !important; }
    body.mobile-await-ar #controls .button-group button#toggleAR { display: inline-block !important; }

    /* 隱藏下方的隱藏/收合按鈕區塊 */
    body.mobile-await-ar #controls > div { display: none !important; }
    /* 強制將 #toggleAR 視覺上凸顯為固定大按鈕，避免被 CSS 排版或 z-index 蓋住 */
    body.mobile-await-ar #controls .button-group button#toggleAR {
        position: fixed !important;
        bottom: 18px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        z-index: 10010 !important;
        padding: 12px 20px !important;
        font-size: 16px !important;
        border-radius: 14px !important;
        display: inline-block !important;
        box-shadow: 0 10px 30px rgba(0,0,0,0.35) !important;
        background: linear-gradient(135deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.08) 100%) !important;
        color: #fff !important;
        pointer-events: auto !important;
    }
    /* 完全隱藏右下角的 controls 卡片（更確定不會殘留） */
    body.mobile-await-ar #controls { display: none !important; }
}
/* 靜態 fallback 按鈕樣式，預設隱藏；在 mobile-await-ar 時顯示 */
@media (max-width: 480px) {
    #mobileStartARFallback { display: none; }
    body.mobile-await-ar #mobileStartARFallback {
        display: block !important;
        position: fixed !important;
        bottom: 18px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        z-index: 10030 !important;
        padding: 14px 22px !important;
        font-size: 16px !important;
        border-radius: 16px !important;
        background: linear-gradient(135deg, rgba(255,255,255,0.18) 0%, rgba(255,255,255,0.08) 100%) !important;
        color: #fff !important;
        border: 1px solid rgba(255,255,255,0.18) !important;
        box-shadow: 0 12px 30px rgba(0,0,0,0.45) !important;
    }
}
